<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Tristan Tzara: El Hombre Aproximativo - Cyberpunk Journey</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Press Start 2P', cursive;
      background: #0a0a0a;
      color: #00ff00;
      overflow: hidden;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
    }

    #gameContainer {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(to bottom, #1a0520 0%, #050210 50%, #0a0515 100%);
      overflow: hidden;
    }

    /* Scanlines CRT */
    #gameContainer::before {
      content: "";
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15) 0px,
        rgba(0, 0, 0, 0.15) 2px,
        transparent 2px,
        transparent 4px
      );
      pointer-events: none;
      z-index: 1000;
      animation: scanline 8s linear infinite;
    }

    @keyframes scanline {
      0% { transform: translateY(0); }
      100% { transform: translateY(4px); }
    }

    #ground {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 120px;
      background: repeating-linear-gradient(
        90deg,
        #1a0a2a 0px,
        #1a0a2a 40px,
        #0f0515 40px,
        #0f0515 80px
      );
      border-top: 4px solid #ff00ff;
      z-index: 1;
    }

    #cityscape {
      position: absolute;
      bottom: 120px;
      left: 0;
      width: 200%;
      height: 300px;
      background-image: 
        repeating-linear-gradient(
          90deg,
          transparent 0px,
          transparent 60px,
          rgba(255, 0, 255, 0.1) 60px,
          rgba(255, 0, 255, 0.1) 62px
        );
      transition: left 0.1s linear;
      z-index: 0;
    }

    .building {
      position: absolute;
      bottom: 0;
      background: #0a0315;
      border: 2px solid #ff00ff;
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
    }

    .building::after {
      content: "";
      position: absolute;
      top: 10%;
      left: 10%;
      width: 80%;
      height: 80%;
      background-image: 
        repeating-linear-gradient(
          0deg,
          transparent 0px,
          transparent 12px,
          rgba(0, 255, 255, 0.3) 12px,
          rgba(0, 255, 255, 0.3) 14px
        ),
        repeating-linear-gradient(
          90deg,
          transparent 0px,
          transparent 12px,
          rgba(0, 255, 255, 0.3) 12px,
          rgba(0, 255, 255, 0.3) 14px
        );
    }

    #tzara {
      position: absolute;
      bottom: 130px;
      left: 100px;
      width: 64px;
      height: 64px;
      z-index: 10;
      transition: transform 0.1s;
    }

    #tzara.walking {
      animation: walk 0.4s steps(2) infinite;
    }

    @keyframes walk {
      0% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }

    .manuscript {
      position: absolute;
      width: 24px;
      height: 32px;
      background: #ffeb3b;
      border: 2px solid #000;
      top: 16px;
      left: 48px;
      box-shadow: 0 0 10px rgba(255, 235, 59, 0.8);
    }

    .manuscript::before {
      content: "‚âà";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 16px;
      color: #000;
    }

    /* Eventos Dad√° */
    .dada-event {
      position: fixed;
      pointer-events: none;
      z-index: 500;
      width: 90vw;
      height: 80vh;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeInOut 4s ease-in-out forwards;
    }

    @keyframes fadeInOut {
      0% { opacity: 0; transform: scale(0.5); }
      20% { opacity: 1; transform: scale(1); }
      80% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(0.8); }
    }

    .brainrot-char {
      width: 100%;
      height: 100%;
      max-width: 700px;
      max-height: 700px;
      background: #ff00ff;
      border: 8px solid #00ffff;
      position: relative;
      box-shadow: 0 0 50px rgba(255, 0, 255, 0.8);
      animation: glitchBrainrot 0.3s infinite;
      margin: auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes glitchBrainrot {
      0%, 100% { transform: translate(0, 0); }
      25% { transform: translate(-2px, 2px); }
      50% { transform: translate(2px, -2px); }
      75% { transform: translate(-1px, -1px); }
    }

    /* HUD */
    #hud {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 100;
      font-size: 16px;
      color: #00ff00;
      text-shadow: 0 0 5px #00ff00;
      line-height: 2;
    }

    #eventLog {
      position: fixed;
      bottom: 20%;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 900px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.95);
      border: 4px solid #00ffff;
      font-size: 18px;
      color: #00ffff;
      text-align: center;
      z-index: 600;
      display: none;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
      line-height: 1.6;
    }

    #eventLog.active {
      display: block;
      animation: pulse 0.5s ease-in-out;
    }

    @keyframes pulse {
      0%, 100% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.05); }
    }

    #instructions {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      font-size: 20px;
      color: #ff00ff;
      text-shadow: 0 0 10px #ff00ff;
      z-index: 200;
      animation: blink 1.5s infinite;
      line-height: 2;
    }

    @keyframes blink {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0.3; }
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #00ffff;
      border-radius: 50%;
      pointer-events: none;
      animation: particleFloat 2s ease-out forwards;
    }

    @keyframes particleFloat {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(var(--tx), var(--ty)) scale(0);
        opacity: 0;
      }
    }

    /* Neon signs */
    .neon-sign {
      position: absolute;
      font-size: 20px;
      color: #00ffff;
      text-shadow: 
        0 0 5px #00ffff,
        0 0 10px #00ffff,
        0 0 20px #00ffff;
      animation: neonFlicker 3s infinite;
      z-index: 2;
    }

    @keyframes neonFlicker {
      0%, 19%, 21%, 23%, 25%, 100% {
        opacity: 1;
        text-shadow: 
          0 0 5px #00ffff,
          0 0 10px #00ffff,
          0 0 20px #00ffff;
      }
      20%, 24% {
        opacity: 0.4;
        text-shadow: 
          0 0 2px #00ffff;
      }
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <div id="cityscape"></div>
    <div id="ground"></div>
    
    <div id="tzara">
      <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
        <!-- Tzara 8-bit sprite -->
        <!-- Hat -->
        <rect x="12" y="4" width="40" height="8" fill="#1a1a2e" stroke="#000" stroke-width="2"/>
        <rect x="16" y="0" width="32" height="4" fill="#1a1a2e" stroke="#000" stroke-width="2"/>
        
        <!-- Head -->
        <rect x="16" y="12" width="32" height="24" fill="#f7d7c0" stroke="#000" stroke-width="2"/>
        
        <!-- Eyes -->
        <rect x="22" y="20" width="6" height="6" fill="#000"/>
        <rect x="36" y="20" width="6" height="6" fill="#000"/>
        
        <!-- Mouth -->
        <rect x="26" y="30" width="12" height="3" fill="#000"/>
        
        <!-- Body -->
        <rect x="12" y="36" width="40" height="28" fill="#8b0000" stroke="#000" stroke-width="2"/>
        
        <!-- Jacket details -->
        <rect x="20" y="40" width="8" height="20" fill="#ff1493"/>
        <rect x="36" y="40" width="8" height="20" fill="#ffeb3b"/>
        
        <!-- Arms -->
        <rect x="4" y="40" width="8" height="16" fill="#f7d7c0" stroke="#000" stroke-width="2"/>
        <rect x="52" y="40" width="8" height="16" fill="#f7d7c0" stroke="#000" stroke-width="2"/>
        
        <!-- Manuscript in hand -->
        <rect x="52" y="48" width="12" height="16" fill="#ffeb3b" stroke="#000" stroke-width="2"/>
        <text x="56" y="60" font-size="8" fill="#000">‚âà</text>
      </svg>
    </div>

    <div id="hud">
      <div>TRISTAN TZARA</div>
      <div>POSITION: <span id="position">0</span>m</div>
      <div>EVENTS: <span id="eventCount">0</span>/10</div>
      <div>DADA LEVEL: <span id="dadaLevel">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë</span></div>
    </div>

    <div id="eventLog"></div>

    <div id="instructions">
      ‚Üê ‚Üí CURSORS TO MOVE<br>
      COLLECT DADA ARTIFACTS
    </div>
  </div>

  <script>
    // Game State
    const game = {
      tzaraPos: 100,
      worldOffset: 0,
      isMoving: false,
      direction: 0,
      eventCount: 0,
      dadaLevel: 0,
      keysPressed: {},
      eventPositions: [500, 1200, 1800, 2500, 3200, 3800, 4500, 5200, 5800, 6500],
      triggeredEvents: new Set(),
      buildings: [],
      lastCheckedPositions: {} // Para trackear qu√© posiciones ya fueron revisadas
    };

    // Dada Events Database
    const dadaEvents = [
      {
        title: "DUCHAMP'S URINAL",
        text: "Una fuente fluorescente aparece. 'El arte es lo que decimos que es'",
        color: "#ff00ff",
        type: "urinal"
      },
      {
        title: "BRAINROT SKIBIDI",
        text: "Personaje digital corruptivo emerge: SKIBIDI TOILET RIZZ OHIO",
        color: "#00ff00",
        type: "brainrot"
      },
      {
        title: "MAN RAY'S IRON",
        text: "Una plancha con clavos levita. El objeto imposible existe.",
        color: "#ffff00",
        type: "iron"
      },
      {
        title: "SIGMA MALE MINDSET",
        text: "Hologram glitcheado: ONLY GRINDSET NO FEELINGS ALPHA ENERGY",
        color: "#ff0080",
        type: "brainrot"
      },
      {
        title: "HUGO BALL'S PHONETIC POEM",
        text: "gadji beri bimba glandridi laula lonni cadori...",
        color: "#00ffff",
        type: "poem"
      },
      {
        title: "GIGACHAD APPEARANCE",
        text: "Entidad pixelada ultra-masculina: MOGGING SINCE 1916 FR FR",
        color: "#ff4500",
        type: "brainrot"
      },
      {
        title: "SCHWITTERS' MERZ",
        text: "Collage de basura cyber materializa. Todo es arte, nada es arte.",
        color: "#9370db",
        type: "collage"
      },
      {
        title: "CAUGHT IN 4K",
        text: "C√°mara hologr√°fica aparece: U WERE CAUGHT LACKING BRO NO CAP",
        color: "#1e90ff",
        type: "brainrot"
      },
      {
        title: "ARP'S CHANCE SQUARES",
        text: "Cuadrados aleatorios caen del cielo. El azar es la nueva l√≥gica.",
        color: "#32cd32",
        type: "squares"
      },
      {
        title: "FINAL BOSS: RATIONALITY",
        text: "La raz√≥n misma se desintegra. DADA WINS. GG EZ RATIO + L + BOZO",
        color: "#ff1493",
        type: "boss"
      }
    ];

    // DOM Elements
    const tzaraEl = document.getElementById('tzara');
    const cityscapeEl = document.getElementById('cityscape');
    const positionEl = document.getElementById('position');
    const eventCountEl = document.getElementById('eventCount');
    const dadaLevelEl = document.getElementById('dadaLevel');
    const eventLogEl = document.getElementById('eventLog');
    const instructionsEl = document.getElementById('instructions');
    const gameContainer = document.getElementById('gameContainer');

    // Generate cityscape buildings
    function generateBuildings() {
      for (let i = 0; i < 20; i++) {
        const building = document.createElement('div');
        building.className = 'building';
        building.style.left = (i * 300 + Math.random() * 100) + 'px';
        building.style.width = (60 + Math.random() * 80) + 'px';
        building.style.height = (100 + Math.random() * 150) + 'px';
        cityscapeEl.appendChild(building);
        game.buildings.push(building);
        
        // Add random neon signs
        if (Math.random() > 0.5) {
          const sign = document.createElement('div');
          sign.className = 'neon-sign';
          sign.textContent = ['DADA', 'CYBER', 'VOID', 'ÁÑ°', 'NULL', 'ERROR'][Math.floor(Math.random() * 6)];
          sign.style.top = (20 + Math.random() * 60) + '%';
          sign.style.left = (10 + Math.random() * 60) + '%';
          building.appendChild(sign);
        }
      }
    }

    // Keyboard controls
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
        game.keysPressed[e.key] = true;
        instructionsEl.style.display = 'none';
      }
    });

    document.addEventListener('keyup', (e) => {
      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
        game.keysPressed[e.key] = false;
      }
    });

    // Create particles
    function createParticles(x, y, color) {
      for (let i = 0; i < 10; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        particle.style.background = color;
        particle.style.setProperty('--tx', (Math.random() - 0.5) * 100 + 'px');
        particle.style.setProperty('--ty', (Math.random() - 0.5) * 100 + 'px');
        gameContainer.appendChild(particle);
        
        setTimeout(() => particle.remove(), 2000);
      }
    }

    // Trigger Dada Event
    function triggerEvent(index) {
      if (game.triggeredEvents.has(index)) return;
      
      game.triggeredEvents.add(index);
      game.eventCount++;
      game.dadaLevel = Math.min(10, game.dadaLevel + 1);
      
      const event = dadaEvents[index];
      
      // Show event log
      eventLogEl.textContent = `[${event.title}] ${event.text}`;
      eventLogEl.classList.add('active');
      eventLogEl.style.color = event.color;
      eventLogEl.style.borderColor = event.color;
      
      setTimeout(() => {
        eventLogEl.classList.remove('active');
      }, 4000);
      
      // Create visual event
      const eventEl = document.createElement('div');
      eventEl.className = 'dada-event';
      
      // Forzar posici√≥n centrada absoluta con estilos inline
      eventEl.style.cssText = `
        position: fixed !important;
        left: 50% !important;
        top: 50% !important;
        transform: translate(-50%, -50%) !important;
        width: 80vw !important;
        height: 70vh !important;
        max-width: 1000px !important;
        max-height: 800px !important;
        z-index: 9999 !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        pointer-events: none !important;
        margin: 0 !important;
        padding: 0 !important;
      `;
      
      if (event.type === 'brainrot') {
        eventEl.innerHTML = `
          <div class="brainrot-char">
            <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; display: block; margin: auto;">
              <!-- Cabeza pixel -->
              <rect x="100" y="50" width="200" height="200" fill="${event.color}" stroke="#000" stroke-width="8"/>
              
              <!-- Ojos -->
              <rect x="130" y="100" width="50" height="50" fill="#000"/>
              <rect x="220" y="100" width="50" height="50" fill="#000"/>
              <rect x="145" y="115" width="20" height="20" fill="#fff"/>
              <rect x="235" y="115" width="20" height="20" fill="#fff"/>
              
              <!-- Boca -->
              <rect x="150" y="180" width="100" height="30" fill="#000"/>
              <rect x="160" y="185" width="20" height="20" fill="#fff"/>
              <rect x="190" y="185" width="20" height="20" fill="#fff"/>
              <rect x="220" y="185" width="20" height="20" fill="#fff"/>
              
              <!-- Cuerpo -->
              <rect x="120" y="250" width="160" height="120" fill="${event.color}" stroke="#000" stroke-width="8"/>
              
              <!-- Brazos -->
              <rect x="50" y="260" width="70" height="40" fill="${event.color}" stroke="#000" stroke-width="6"/>
              <rect x="280" y="260" width="70" height="40" fill="${event.color}" stroke="#000" stroke-width="6"/>
              
              <!-- Texto -->
              <text x="200" y="390" font-size="28" font-family="Press Start 2P" fill="#fff" text-anchor="middle" stroke="#000" stroke-width="2">BRAINROT</text>
            </svg>
          </div>
        `;
      } else if (event.type === 'urinal') {
        eventEl.innerHTML = `
          <svg viewBox="0 0 400 500" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; max-height: 80vh; display: block; margin: auto;">
            <!-- Urinal/Fountain -->
            <ellipse cx="200" cy="150" rx="120" ry="40" fill="#fff" stroke="#000" stroke-width="8"/>
            <path d="M 80 150 Q 80 350 200 380 Q 320 350 320 150" fill="#fff" stroke="#000" stroke-width="8"/>
            
            <!-- Detalles -->
            <ellipse cx="200" cy="200" rx="60" ry="20" fill="#e0e0e0"/>
            <circle cx="200" cy="280" r="25" fill="#333"/>
            <circle cx="200" cy="280" r="15" fill="#000"/>
            
            <!-- Sombra */
            <ellipse cx="200" cy="380" rx="100" ry="20" fill="rgba(0,0,0,0.3)"/>
            
            <!-- Texto -->
            <text x="200" y="440" font-size="32" font-family="Press Start 2P" fill="${event.color}" text-anchor="middle" stroke="#000" stroke-width="2">R.MUTT</text>
            <text x="200" y="480" font-size="28" font-family="Press Start 2P" fill="${event.color}" text-anchor="middle" stroke="#000" stroke-width="2">1917</text>
          </svg>
        `;
      } else if (event.type === 'poem') {
        eventEl.innerHTML = `
          <svg viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; display: block; margin: auto;">
            <!-- Background -->
            <rect width="600" height="400" fill="rgba(0,0,0,0.8)"/>
            
            <!-- Poema fon√©tico -->
            <text x="300" y="80" font-size="48" font-family="Press Start 2P" fill="${event.color}" text-anchor="middle">GADJI</text>
            <text x="300" y="140" font-size="48" font-family="Press Start 2P" fill="#ff00ff" text-anchor="middle">BERI</text>
            <text x="300" y="200" font-size="48" font-family="Press Start 2P" fill="#00ffff" text-anchor="middle">BIMBA</text>
            <text x="300" y="260" font-size="48" font-family="Press Start 2P" fill="#ffff00" text-anchor="middle">GLANDRIDI</text>
            <text x="300" y="320" font-size="36" font-family="Press Start 2P" fill="#00ff00" text-anchor="middle">LAULA LONNI</text>
            
            <!-- Decoraci√≥n -->
            <circle cx="50" cy="50" r="20" fill="none" stroke="${event.color}" stroke-width="4"/>
            <circle cx="550" cy="50" r="20" fill="none" stroke="${event.color}" stroke-width="4"/>
            <circle cx="50" cy="350" r="20" fill="none" stroke="${event.color}" stroke-width="4"/>
            <circle cx="550" cy="350" r="20" fill="none" stroke="${event.color}" stroke-width="4"/>
          </svg>
        `;
      } else if (event.type === 'iron') {
        eventEl.innerHTML = `
          <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; display: block; margin: auto;">
            <!-- Plancha -->
            <path d="M 100 100 L 300 100 L 320 250 L 80 250 Z" fill="#666" stroke="#000" stroke-width="6"/>
            <ellipse cx="200" cy="100" rx="80" ry="30" fill="#888" stroke="#000" stroke-width="6"/>
            
            <!-- Clavos (imposible) -->
            <rect x="130" y="120" width="12" height="100" fill="#ff0000" stroke="#000" stroke-width="3"/>
            <rect x="180" y="140" width="12" height="80" fill="#ff0000" stroke="#000" stroke-width="3"/>
            <rect x="230" y="110" width="12" height="110" fill="#ff0000" stroke="#000" stroke-width="3"/>
            <polygon points="136,120 142,120 139,100" fill="#ff0000" stroke="#000" stroke-width="2"/>
            <polygon points="186,140 192,140 189,120" fill="#ff0000" stroke="#000" stroke-width="2"/>
            <polygon points="236,110 242,110 239,90" fill="#ff0000" stroke="#000" stroke-width="2"/>
            
            <!-- Texto -->
            <text x="200" y="320" font-size="28" font-family="Press Start 2P" fill="${event.color}" text-anchor="middle">MAN RAY</text>
            <text x="200" y="360" font-size="20" font-family="Press Start 2P" fill="${event.color}" text-anchor="middle">CADEAU 1921</text>
          </svg>
        `;
      } else if (event.type === 'collage') {
        eventEl.innerHTML = `
          <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; display: block; margin: auto;">
            <!-- Collage ca√≥tico -->
            <rect x="50" y="50" width="150" height="200" fill="#ff00ff" stroke="#000" stroke-width="6" transform="rotate(-15 125 150)"/>
            <rect x="200" y="100" width="180" height="120" fill="#00ffff" stroke="#000" stroke-width="6" transform="rotate(10 290 160)"/>
            <circle cx="350" cy="250" r="80" fill="#ffff00" stroke="#000" stroke-width="6"/>
            <rect x="100" y="300" width="250" height="100" fill="#00ff00" stroke="#000" stroke-width="6" transform="rotate(-5 225 350)"/>
            
            <!-- Elementos Merz -->
            <text x="130" y="150" font-size="40" fill="#000" transform="rotate(-15 130 150)">M</text>
            <text x="290" y="170" font-size="36" fill="#000" transform="rotate(10 290 170)">E</text>
            <text x="350" y="260" font-size="44" fill="#000">R</text>
            <text x="220" y="360" font-size="38" fill="#000" transform="rotate(-5 220 360)">Z</text>
            
            <!-- T√≠tulo -->
            <text x="250" y="470" font-size="26" font-family="Press Start 2P" fill="${event.color}" text-anchor="middle">SCHWITTERS</text>
          </svg>
        `;
      } else if (event.type === 'squares') {
        eventEl.innerHTML = `
          <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; display: block; margin: auto;">
            <!-- Cuadrados seg√∫n las leyes del azar -->
            <rect x="50" y="80" width="100" height="100" fill="#ff0000" stroke="#000" stroke-width="4" transform="rotate(23 100 130)"/>
            <rect x="300" y="50" width="80" height="80" fill="#0000ff" stroke="#000" stroke-width="4" transform="rotate(-15 340 90)"/>
            <rect x="180" y="200" width="120" height="120" fill="#ffff00" stroke="#000" stroke-width="4" transform="rotate(45 240 260)"/>
            <rect x="400" y="250" width="60" height="60" fill="#00ff00" stroke="#000" stroke-width="4" transform="rotate(-30 430 280)"/>
            <rect x="100" y="350" width="90" height="90" fill="#ff00ff" stroke="#000" stroke-width="4" transform="rotate(12 145 395)"/>
            <rect x="320" y="380" width="70" height="70" fill="#00ffff" stroke="#000" stroke-width="4" transform="rotate(-40 355 415)"/>
            
            <!-- Texto -->
            <text x="250" y="470" font-size="24" font-family="Press Start 2P" fill="${event.color}" text-anchor="middle">ARP - CHANCE</text>
          </svg>
        `;
      } else if (event.type === 'boss') {
        eventEl.innerHTML = `
          <svg viewBox="0 0 600 500" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; display: block; margin: auto;">
            <!-- Boss: La Raz√≥n desintegr√°ndose -->
            <rect width="600" height="500" fill="rgba(0,0,0,0.9)"/>
            
            <!-- Cerebro glitcheado -->
            <ellipse cx="300" cy="200" rx="150" ry="120" fill="#666" stroke="#ff0000" stroke-width="8" opacity="0.8"/>
            <path d="M 200 180 Q 220 150 250 160 Q 280 140 300 170 Q 330 150 350 175 Q 370 160 380 190" 
                  stroke="#ff0000" stroke-width="6" fill="none"/>
            
            <!-- Grietas -->
            <line x1="250" y1="150" x2="270" y2="250" stroke="#ff00ff" stroke-width="6"/>
            <line x1="320" y1="160" x2="300" y2="260" stroke="#00ffff" stroke-width="6"/>
            <line x1="360" y1="180" x2="340" y2="240" stroke="#ffff00" stroke-width="6"/>
            
            <!-- Texto final -->
            <text x="300" y="350" font-size="48" font-family="Press Start 2P" fill="#ff0000" text-anchor="middle">RATIONALITY</text>
            <text x="300" y="400" font-size="38" font-family="Press Start 2P" fill="#ff00ff" text-anchor="middle">DESTROYED</text>
            <text x="300" y="460" font-size="28" font-family="Press Start 2P" fill="${event.color}" text-anchor="middle">DADA WINS</text>
          </svg>
        `;
      } else {
        eventEl.innerHTML = `
          <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; display: block; margin: auto;">
            <rect x="50" y="50" width="300" height="300" fill="${event.color}" stroke="#000" stroke-width="8"/>
            <text x="200" y="220" font-size="72" font-family="Press Start 2P" fill="#000" text-anchor="middle">DADA</text>
          </svg>
        `;
      }
      
      gameContainer.appendChild(eventEl);
      
      createParticles(window.innerWidth / 2, 250, event.color);
      
      setTimeout(() => eventEl.remove(), 4000);
      
      // Update HUD
      eventCountEl.textContent = game.eventCount;
      dadaLevelEl.textContent = '‚ñà'.repeat(game.dadaLevel) + '‚ñë'.repeat(10 - game.dadaLevel);
      
      // Check win condition
      if (game.eventCount >= 10) {
        setTimeout(() => {
          eventLogEl.textContent = 'üéâ DADA COMPLETE! RATIONALITY DESTROYED! üéâ';
          eventLogEl.style.color = '#ff00ff';
          eventLogEl.classList.add('active');
        }, 3000);
      }
    }

    // Check event triggers - funciona en ambas direcciones
    function checkEvents() {
      const currentPos = Math.abs(game.worldOffset);
      
      game.eventPositions.forEach((eventPos, index) => {
        // Rango de activaci√≥n m√°s amplio
        const inRange = currentPos >= eventPos - 200 && currentPos <= eventPos + 200;
        
        if (inRange && !game.triggeredEvents.has(index)) {
          // Verificar si estamos lo suficientemente cerca del punto exacto
          const distance = Math.abs(currentPos - eventPos);
          
          // Trigger cuando estamos dentro de 100 metros del evento
          if (distance <= 100) {
            triggerEvent(index);
          }
        }
      });
    }

    // Game loop
    function gameLoop() {
      let isMoving = false;
      
      if (game.keysPressed['ArrowRight']) {
        game.worldOffset -= 4;
        tzaraEl.style.transform = 'scaleX(1)';
        isMoving = true;
      }
      
      if (game.keysPressed['ArrowLeft']) {
        game.worldOffset += 4;
        tzaraEl.style.transform = 'scaleX(-1)';
        isMoving = true;
      }
      
      // Limit world bounds
      game.worldOffset = Math.max(-7000, Math.min(0, game.worldOffset));
      
      // Update cityscape parallax
      cityscapeEl.style.left = (game.worldOffset * 0.3) + 'px';
      
      // Update position display
      const currentMeters = Math.abs(Math.floor(game.worldOffset / 10));
      positionEl.textContent = currentMeters;
      
      // Debug: mostrar pr√≥ximo evento
      const currentPos = Math.abs(game.worldOffset);
      const nextEvent = game.eventPositions.find((pos, idx) => 
        !game.triggeredEvents.has(idx) && pos > currentPos
      );
      const prevEvent = [...game.eventPositions].reverse().find((pos, idx) => 
        !game.triggeredEvents.has(game.eventPositions.length - 1 - idx) && pos < currentPos
      );
      
      // Walking animation
      if (isMoving) {
        tzaraEl.classList.add('walking');
      } else {
        tzaraEl.classList.remove('walking');
      }
      
      // Check for events
      checkEvents();
      
      requestAnimationFrame(gameLoop);
    }

    // Initialize
    generateBuildings();
    gameLoop();

    // Random ambient particles
    setInterval(() => {
      const x = Math.random() * window.innerWidth;
      const y = Math.random() * window.innerHeight * 0.6;
      const colors = ['#ff00ff', '#00ffff', '#ffff00', '#00ff00'];
      createParticles(x, y, colors[Math.floor(Math.random() * colors.length)]);
    }, 2000);
  </script>
</body>
</html>
